# Proforma - v0.0.1
The Proforma project provids a simple string templating solution

Javadoc documentation of this project can be found [here](https://simonemmott.github.io/Proforma/index.html)


### License

[GNU GENERAL PUBLIC LICENSE v3](http://fsf.org/)

## Basic Example

The Proforma is used to generate parameterised output on a writer instance.

This code:

```java
Proforma proforma = new Proforma()
		.add("Line 1 has this ", Proforma.param("p1"))
		.add("Line 2 the parameter ", Proforma.param("p2"), " and ", Proforma.param("p3"), " only.")
		.add("This proforma has the following parameters: ", Proforma.param("p1"), ", ", Proforma.param("p2"), " and ", Proforma.param("p3"));
		
proforma.set("p1", "PARAMETER")	
		.set("p2", "OTHER")
		.set("p3", "PARAM");
		
proforma.write(new PrintWriter(System.out)).flush();
```
Produces the following output.

```text
Line 1 has this PARAMETER
Line 2 the parameter OTHER and PARAM only.
This proforma has the following parameters: PARAMETER, OTHER and PARAM
```

## Getting Started

Download a jar file containing the latest version or fork this project and install in your IDE

Maven users can add this project using the following additions to the pom.xml file.
```maven
<dependencies>
    ...
    <dependency>
        <groupId>com.k2</groupId>
        <artifactId>Proforma</artifactId>
        <version>0.0.1</version>
    </dependency>
    ...
</dependencies>
```

## Working With Proforma

The Profoma provides an API for generating templated and parameterized string output to an implementation of the Writer interface

### Setup up the Proforma template
Proformas define a template of literal strings and parameters. The template is defined in lines and parts.

A line contains 0 or more parts and parts are either literal strings, parameters or Proforma instances.

Lines are added to the proforma template using the `add(...)` method.

e.g.

```java
Proforma proforma = new Proforma()
		.add("This is ", Proforma.param("name"), " template")
		.add("This is line 2")
		.add("This line has another ", Proforma.param("parameter"))
		.add("This line had two parameters ", Proforma.param("name"), " and ", Proforma.param("parameter"));
```
The above code creates a proforma template with 4 lines and two parameters. ##NOTE## Repeated inclusions of parameters with the same alias
result in the original parameter with the alias being reused at the defined location in the template.

Parameters can be defined separately from the proforma template

e.g.

```java
Parameter p1 = Proforma.param("p1");

Proforma proforma = new Proforma().add("This is ", p1, " template");
```

### Parameters
Parameters are defined using the static `param(String)` method of Proforma.
e.g.

```java
Parameter p1 = Proforma.param("p1");
```
Defines a parameter identified by the alias "p1"

Parameters can have their value set directly on the Parameter instance.
e.g.

```java
p1.setValue("Value for p1");
```
Sets the value of the Parameter p1 to `Value for p1`

Parameters can have their values set indirectly through the Proforma instance and identified by their alias.

```java
Proforma proforma = new Proforma().add("Line 1 has a paramter: ", Proforma.param("p1"));

proforma.set("p1", "Parameter 1 value");
```

Parameters can get their value from a call back
e.g.

```java
Parameter p1 = Proforma.param("p1").setCallback(new CallBack<String>() { public get() { return "VALUE"; } } );
```
The above example shows setting the value of the Parameter p1 and displays the method chaining supported by the Proforma API
In the above example the method `get()` of the call back will be called the first time the parameteres value is requested and the value cached 
for subsequent requests for the parameters value

Parameters can be configured to request their value from the call back each time the parameter value is called.

The following code shows setting a parameter to get its value from its call back each time the parameter value is requested

```java
Parameter p1 = Proforma.param("p1").setContinuousCallback(new CallBack<String>() { public get() { return "VALUE"; } } );
```

Parameters can also have their values set to a call back indirectly 

The code:

```java
proforma.set("p1", new CallBack<String>() { public get() { return "VALUE"; } });
```
Set the Parameter with the alias "p1" to get its value from the defined call back.

And the code:

```java
proforma.set("p1", new CallBack<String>() { public get() { return "VALUE"; } }, true); 
```

Causes the Parameter with the alias "p1" to get its value from the call back each time the parameters value is requested.

### Generating Output
The output from a proforma is generated by calling the `write(Writer)` method of the proforma or the `write(int, Writer)` method.

The `writer(...)` methods return the given writer for method chaining.

e.g.

```java
proforma.write(new PrintWriter(System.out)).flush();
```
Causes the proforma template to be written to the output stream replacing all parameters with their defined values.

The proforma template can be indented if required. The default indent string is '  ' (two blank spaces). The indent is repeated a given number of times.

e.g.

```java
proforma.setIndent("\t").write(2, new PrintWriter(System.out)).flush();
```

Causes the proforma template to be written to the output stream indented by 2 tab characters.

The carriage return gnerated by the proforma is the system default carriage return.  The carriage return can be set using the `setCarriageReturn(...)` methods

e.g.

```java
proforma.setCarriageReturn("\n");
```
forces the profoma to use "\n" as the carriage return;

And

```java
proforma.setCarriageReturn(CarriageReturn.DOS);
```
forces the proforma to use the DOS carriage return.

Proformas can be defined as embedded. Embedded proformas omit the indent characters from the first line and the carriage return from the last line.

The code below shows identifying a proforma as embedded:

```java
proformma.setEmbedded(true);
```

A Proforma can automatically increase the indent of proformas embedded in their proforma template.

The code below set the proforma to no automatically increase the indent of proformas embedded in its templete.

```java
proforma.setAutoIncrement(false);
```
By default a proforma does automatically increase the indent of proformas embedded in its template.







































